@* @page "/" *@
@* @page "/employee/leaves/{EmployeeID}" *@
@page "/employee/leaves"
@inject ISnackbar Snackbar
<PageTitle>Leaves</PageTitle>

<MudTabs Elevation="2"  KeepPanelsAlive  Color="Color.Dark" Rounded="true" Centered=true PanelClass="my-4 text-center">
    <MudTabPanel Text="Overview" Class="font-weight-bold text-center">
        <MudGrid>
            <MudItem xs="12" sm="5" md="4" >
                <MudCard Elevation="3">
                 
                    <MudCardContent>
                        <div class="d-flex justify-center mb-4">
                            <MudAvatar  Style="height:197px; width:200px;">
                                <MudImage ObjectFit=ObjectFit.Fill Src="@Global.ImagePath" />

                                @if (Global.ImagePath == null)
                                {
                                    <MudIcon Icon="@MudBlazor.Icons.Material.Filled.SentimentVeryDissatisfied" Size="Size.Large"></MudIcon>
                                }
                            </MudAvatar>
                                
                        </div>
                        <MudDivider />
                        <MudText Align="Align.Center"> @Global.EmpCode</MudText>
                            <MudText Align="Align.Center"> @Global.EmpName</MudText>
                        <MudText Align="Align.Center"> @Global.EmpDesignation</MudText>
                    </MudCardContent>
                   
                </MudCard>
            </MudItem>
            <MudItem xs="12" sm="7" md="8" >
                <MudCard Elevation="3">
                    <MudCardHeader>
                        <CardHeaderContent>
                                <MudText Typo="Typo.h5">چُھٹیوں کی تفصیل</MudText>
                        </CardHeaderContent>
                    </MudCardHeader>
                    <MudCardContent>
                            <MudGrid Class="border bg-light rounded" >
                                <MudItem xs="6">
                                    <MudPaper Elevation=2 Square="true" Class="d-flex justify-content-center py-3">
                                        <MudText Style="font-weight:600" Typo="Typo.body1">12</MudText>

                                    </MudPaper>
                                </MudItem> 
                                <MudItem xs="6">
                                    <MudPaper Elevation=2 Square="true" Class="d-flex justify-content-center py-3 ">
                                       
                                        <MudText Style="font-weight:600" Typo="Typo.body1">مہینے میں کل چُھٹیاں</MudText>
                                    </MudPaper>
                                </MudItem>
                                  
                                <MudItem xs="6">
                                    <MudPaper Elevation=2 Square="true" Class="d-flex justify-content-center py-3">
                                        <MudText Style="font-weight:600" Typo="Typo.body1">12</MudText>

                                    </MudPaper>
                                </MudItem> 
                                <MudItem xs="6">
                                    <MudPaper Elevation=2 Square="true" Class="d-flex justify-content-center py-3 ">

                                        <MudText Style="font-weight:600" Typo="Typo.body1">سال میں کل چُھٹیاں</MudText>
                                    </MudPaper>
                                </MudItem>
                                  
                                <MudItem xs="6">
                                    <MudPaper Elevation=2 Square="true" Class="d-flex justify-content-center py-3">
                                        <MudText Style="font-weight:600" Typo="Typo.body1">12</MudText>

                                    </MudPaper>
                                </MudItem> 
                                <MudItem xs="6">
                                    <MudPaper Elevation=2 Square="true" Class="d-flex justify-content-center py-3 ">

                                        <MudText Style="font-weight:600" Typo="Typo.body1">بقایا چُھٹیاں</MudText>
                                    </MudPaper>
                                </MudItem>
                                  
                               
                        </MudGrid>
                    </MudCardContent>
                    <MudCardActions Class="pb-5 pl-4">
                        @* <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto" @onclick="@(() => SaveChanges("Profile details saved", Severity.Success))">Save Changes</MudButton> *@
                    </MudCardActions>
                </MudCard>  
                </MudItem>
                <MudItem xs="12">
                <MudCard Elevation="25">
                    <MudCardHeader>
                        <CardHeaderContent>
                                <MudText Typo="Typo.h5">چُھٹیوں کی تفصیل</MudText>
                        </CardHeaderContent>
                    </MudCardHeader>
                    <MudCardContent>
                            <MudSimpleTable Hover="true"  FixedHeader="true" Style="height:400px">
                                <thead>
                                    <tr>
                                        @foreach (var h in headings)
                                    {
                                        <th>@h</th>
                                    }
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var row in rows)
                                {
                                    <tr>
                                        @foreach (var x in row.Split())
                                        {
                                            <td>@x</td>
                                        }
                                    </tr>
                                }
                            </tbody>
                        </MudSimpleTable>
                    </MudCardContent>
                  
                </MudCard>
            </MudItem>
        </MudGrid> 
    </MudTabPanel>
        <MudTabPanel Text="Short Leave" Class="font-weight-bold text-center">
            <MudGrid>
                    <MudItem xs="12">
                        <MudCard  Elevation="2">
                            <div class="card-header">
                            <MudText Typo="Typo.h5">گیٹ پاس</MudText>
                    </div>
                    <MudCardContent>

                                <MudGrid>

                                    <MudItem xs="12" >
                                <MudText Typo="Typo.body2">Employee Standard Time</MudText>

                                    </MudItem>
                                    <MudItem xs="12" sm="6" >
                                <MudTimePicker   Margin="Margin.Dense" Label="In Time" AmPm="true" Variant="Variant.Outlined" />
                                    </MudItem>
                            <MudItem xs="12" sm="6">
                                <MudTimePicker   Margin="Margin.Dense"  Label="Out Time" AmPm="true" Variant="Variant.Outlined" />
                                    </MudItem>
                            <MudDivider />
                            <MudItem xs="12" sm="6">
                                <MudTextField @bind-Value="ShortLeaveNo" Margin="Margin.Dense" Label="Short Leave No" Disabled Variant="Variant.Outlined" />
                                    </MudItem>
                             <MudItem xs="12" sm="6">
                                 <MudDatePicker @bind-Value="ShortLeaveDate" PickerVariant="PickerVariant.Dialog" Margin="Margin.Dense" Label="Leave Date" Variant=Variant.Outlined
                                                AdditionalDateClassesFunc="@((DateTime dt)=>((int)dt.DayOfWeek == 0 ? "red-text text-accent-4" : ""))" />
                             </MudItem>
                             <MudItem xs="12" sm="6">
                                 <MudTimePicker  Margin="Margin.Dense"  Label="Current Time" AmPm="true" Variant="Variant.Outlined" />
                             </MudItem>

                             <MudItem  xs="12" sm="6">
                                <MudSelect @bind-Value="ShortLeaveType" Margin="Margin.Dense" T="string" Label="Leave Type" Variant="Variant.Outlined">
                                     <MudSelectItem Value="@("Tyrannosaur")" />
                                     <MudSelectItem Value="@("Triceratops")" />
                                     <MudSelectItem Value="@("Henon Rex")" />
                                 </MudSelect>
                              
                                    </MudItem>
                                    <MudItem xs="12" sm="6">
                                <MudSelect @bind-Value="ShortLeaveNature" Margin="Margin.Dense" T="string" Label="Nature of Leave" Variant="Variant.Outlined">
                                     <MudSelectItem Value="@("Tyrannosaur")" />
                                     <MudSelectItem Value="@("Triceratops")" />
                                     <MudSelectItem Value="@("Henon Rex")" />
                                 </MudSelect>                           
                             </MudItem>
                             <MudItem xs="12" sm="6">
                                <MudSelect @bind-Value="ShortLeaveReason" Margin="Margin.Dense" T="string" Label="Reason" Variant="Variant.Outlined">
                                     <MudSelectItem Value="@("Tyrannosaur")" />
                                     <MudSelectItem Value="@("Triceratops")" />
                                     </MudSelect>
                                         </MudItem>
                                    <MudItem xs="12">
                                <MudTextField @bind-Value="ShortLeaveDetailReason" T="string" Label="Detail Reason" Variant="Variant.Outlined" Text="safsa" Lines="2" />
                                         </MudItem>
                           
                                </MudGrid>
                            </MudCardContent>
                            <MudCardActions Class="pb-4">
                         <MudLoadingButton @bind-Loading=@_LoadingShortLeave Disabled="@_LoadingShortLeave"
                                           StartIcon="@MudBlazor.Icons.Material.Filled.ArrowLeft"
                                           OnClick="@(() => ShortLeaveSubmit("Profile details saved", Severity.Success))" Variant="Variant.Filled"
                                           Color="Color.Error"
                                           Size="Size.Large" Class=" font-weight-bold"
                                           FullWidth="true">درخواست جمع کروائیں </MudLoadingButton>
                     </MudCardActions>
                        </MudCard>
                    </MudItem>
                </MudGrid>
        </MudTabPanel>
    <MudTabPanel Text="Full Leave" Class="font-weight-bold">
            <MudGrid>
                <MudItem xs="12">
                    <MudCard Elevation="2">
                        <MudCardHeader>
                            <CardHeaderContent>
                             <MudText Typo="Typo.h5">درخواست فارم</MudText>
                            </CardHeaderContent>
                        </MudCardHeader>
                     <MudCardContent>
                         <MudGrid>
                             <MudItem xs="12" md="6">
                                 <MudTextField Margin="Margin.Dense" @bind-Value="LeaveNo" Label="Leave No" Disabled Variant="Variant.Outlined" />
                             </MudItem>
                             <MudItem xs="12" md="6">
                                 <MudDatePicker Margin="Margin.Dense" Label="Leave Date" Variant=Variant.Outlined
                                                AdditionalDateClassesFunc="@((DateTime dt)=>((int)dt.DayOfWeek == 0 ? "red-text text-accent-4" : ""))" />
                             </MudItem>
                             <MudItem xs="12" md="6">
                                 <MudSelect Margin="Margin.Dense" T="string" Label="Leave Type" Variant="Variant.Outlined">
                                     <MudSelectItem Value="@("Tyrannosaur")" />
                                     <MudSelectItem Value="@("Triceratops")" />
                                     <MudSelectItem Value="@("Henon Rex")" />
                                 </MudSelect>

                             </MudItem>
                             <MudItem xs="12" md="6">
                                 <MudSelect Margin="Margin.Dense" T="string" Label="Nature of Leave" Variant="Variant.Outlined">
                                     <MudSelectItem Value="@("Tyrannosaur")" />
                                     <MudSelectItem Value="@("Triceratops")" />
                                     <MudSelectItem Value="@("Henon Rex")" />
                                 </MudSelect>
                             </MudItem>
                             <MudItem xs="12">
                                 <MudSelect Margin="Margin.Dense" T="string" Label="Reason" Variant="Variant.Outlined">
                                     <MudSelectItem Value="@("Tyrannosaur")" />
                                     <MudSelectItem Value="@("Triceratops")" />
                                 </MudSelect>
                             </MudItem>
                             <MudItem xs="12">
                                 <MudTextField T="string" Label="Detail Reason" Variant="Variant.Outlined" Text="safsa" Lines="2" />
                             </MudItem>

                         </MudGrid>
                     </MudCardContent>
                     <MudCardActions Class="pb-4">
                         <MudLoadingButton @bind-Loading=@_LoadingShortLeave Disabled="@_LoadingShortLeave"
                                           StartIcon="@MudBlazor.Icons.Material.Filled.ArrowLeft"
                                           OnClick="@(() => SaveChanges("Profile details saved", Severity.Success))" Variant="Variant.Filled"
                                           Color="Color.Error"
                                           Size="Size.Large" Class=" font-weight-bold"
                                           FullWidth="true">درخواست جمع کروائیں </MudLoadingButton>
                     </MudCardActions>
                        </MudCard>
                    </MudItem>
                 
                </MudGrid>
        </MudTabPanel>
        </MudTabs>
   
                    
    @code {

    bool _LoadingShortLeave { get; set; } = false;
     string? AvatarIcon{ get; set; }
    string? ShortLeaveNo { get; set; }
    string? ShortLeaveDate { get; set; }
    string? ShortLeaveType { get; set; }
    string? ShortLeaveNature { get; set; }
    string? ShortLeaveReason { get; set; }
    string? ShortLeaveDetailReason { get; set; }
    string? LeaveNo { get; set; }
     string AvatarButtonText { get; set; } = "Delete Picture";
     Color AvatarButtonColor { get; set; } = Color.Error;
     string FirstName { get; set; } = "Jonny";
     string LastName { get; set; } = "Larsson";
     string JobTitle { get; set; } = "IT Consultant";
     string Email { get; set; } = "Youcanprobably@findout.com";
    string[] headings = { "ID", "Name", "Email", "Gender", "IP Address" };
    string[] rows = {
        @"1 Krishna kpartner0@usatoday.com Male 28.25.250.202",
        @"2 Webb wstitle1@ning.com Male 237.168.134.114",
        @"3 Nathanil nneal2@cyberchimps.com Male 92.6.0.175",
        @"4 Adara alockwood3@patch.com Female 182.174.217.152",
        @"5 Cecilius cchaplin4@shinystat.com Male 195.124.144.18",
        @"6 Cicely cemerine9@soup.io Female 138.94.191.43",
    };

    private async Task SaveChanges(string message, Severity severity)
    {
        _LoadingShortLeave = true;
        await Task.Delay(2000);
        Snackbar.Add(message, severity, config =>
        {
            config.ShowCloseIcon = true;
        });
        _LoadingShortLeave = false;
    }
    private async Task ShortLeaveSubmit(string message, Severity severity)
    {
        _LoadingShortLeave = true;
        await Task.Delay(2000);
        Snackbar.Add(message, severity, config =>
        {
            config.ShowCloseIcon = true;
        });
        _LoadingShortLeave = false;
    }

}
